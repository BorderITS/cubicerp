<?xml version="1.0" ?>
<openerp>
    <data>

        <!--  Shortcuts -->
        <act_window name="Budget Lines"
            context="{'search_default_analytic_account_id': [active_id], 'default_analytic_account_id': active_id}"
            res_model="budget.budget.lines"
            src_model="account.analytic.account"
            id="act_account_analytic_account_cb_lines"/>


        <!--record model="ir.ui.view" id="view_account_analytic_account_form_inherit_budget">
            <field name="name">account.analytic.account.form.inherit.budget</field>
            <field name="model">account.analytic.account</field>
            <field name="inherit_id" ref="analytic.view_account_analytic_account_form"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Budget Lines" groups="account.group_account_user">
                            <field name="budget_budget_line_ids" widget="one2many_list" colspan="4" nolabel="1" mode="tree">
                                <tree string="Budget Lines" editable="top">
                                    <field name="budget_budget_id"/>
                                    <field name="budget_position_id"/>
                                    <field name="date_from"/>
                                    <field name="date_to"/>
                                    <field name="paid_date"/>
                                    <field name="planned_amount"/>
                                    <field name="practical_amount" sum="Practical Amount"/>
                                    <field name="theoritical_amount" sum="Theoritical Amount"/>
                                    <field name="percentage"/>
                                </tree>
                                <form string="Budget Lines">
                                    <field name="budget_budget_id"/>
                                    <field name="budget_position_id"/>
                                    <field name="date_from"/>
                                    <field name="date_to"/>
                                    <field name="paid_date"/>
                                    <field name="planned_amount"/>
                                </form>
                            </field>
                    </page>
                </notebook>
            </field>
        </record-->

        <record model='ir.ui.view' id='view_account_period_form'>
			<field name='name'>account.period.form.inherit.budget</field>
			<field name='model'>account.period</field>
			<field name='inherit_id' ref='account.view_account_period_form'/>
			<field name='arch' type='xml'>
                <xpath expr="//field[@name='fiscalyear_id']" position="after">
                    <field name="budget_period_id" widget="selection"/>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='view_account_period_tree'>
			<field name='name'>account.period.tree.inherit.budget</field>
			<field name='model'>account.period</field>
			<field name='inherit_id' ref='account.view_account_period_tree'/>
			<field name='arch' type='xml'>
                <xpath expr="//field[@name='special']" position="after">
                    <field name="budget_period_id"/>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='invoice_form'>
			<field name='name'>account.invoice.form.inherit.budget</field>
			<field name='model'>account.invoice</field>
			<field name='inherit_id' ref='account.invoice_form'/>
			<field name='arch' type='xml'>
                <xpath expr="//field[@name='move_id']" position="before">
                    <field name="budget_struct_id"/>
                    <field name="budget_analytic_id"/>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='invoice_supplier_form'>
			<field name='name'>account.invoice.supplier.form.inherit.budget</field>
			<field name='model'>account.invoice</field>
			<field name='inherit_id' ref='account.invoice_supplier_form'/>
			<field name='arch' type='xml'>
                <xpath expr="//field[@name='move_id']" position="before">
                    <field name="budget_struct_id"/>
                    <field name="budget_analytic_id"/>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='view_vendor_payment_form'>
			<field name='name'>account.voucher.payment.form.inherit.budget</field>
			<field name='model'>account.voucher</field>
			<field name='inherit_id' ref='account_voucher.view_vendor_payment_form'/>
			<field name='arch' type='xml'>
                <xpath expr="//group[@string='Internal Notes']/.." position="inside">
                    <group string="Budget">
                        <field name="budget_struct_id"/>
                        <field name="budget_analytic_id"/>
                    </group>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='view_move_form'>
			<field name='name'>account.move.form.inherit.budget</field>
			<field name='model'>account.move</field>
			<field name='inherit_id' ref='account.view_move_form'/>
			<field name='arch' type='xml'>
                <xpath expr="//group[@string='Accounting Documents']" position="inside">
                    <field name="budget_struct_id"/>
                </xpath>
                <xpath expr="//tree/field[@name='analytic_account_id']" position="after">
                    <field name="budget_struct_id"/>
                </xpath>
			</field>
		</record>

        <record model='ir.ui.view' id='view_move_line_form'>
			<field name='name'>account.move.line.form.inherit.budget</field>
			<field name='model'>account.move.line</field>
			<field name='inherit_id' ref='account.view_move_line_form'/>
			<field name='arch' type='xml'>
                <field name="analytic_account_id" position="after">
                    <field name="budget_struct_id"/>
                </field>
			</field>
		</record>

        <record id="view_account_move_line_filter" model="ir.ui.view">
            <field name="name">Journal Items (Search) inherit budget</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_account_move_line_filter"/>
            <field name="arch" type="xml">
                <field name="account_id" position="after">
                    <field name="budget_struct_id"/>
                </field>
            </field>
        </record>

    </data>
</openerp>


